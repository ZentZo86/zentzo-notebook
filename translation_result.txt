# 1.1 属性 (Properties)

我们首先根据 Godot 官方文档对网格（Mesh）的定义开始我们的探索：

![](images/888ad8d0d78c77e44a6ba6dc885a33f232c8a5cb398d2f33312f405aea4df0c3.jpg)

网格（Mesh）是一种包含基于顶点数组几何体的资源类型，被划分为多个表面（Surfaces）。每个表面包含一个完全独立的数组和用于绘制它的材质。从设计角度来看，具有多个表面的网格优于单个表面，因为在 3D 编辑软件中创建的对象通常包含多种材质。

https://docs.godotengine.org/en/stable/classes/class_mesh.html

![](images/9c8a95b7b4171535b92d1d173327ec0d07276b5f159636833393744f9332b1b1.jpg)

这个定义与 Autodesk Maya 或 Blender 等其他 3D 工具中的定义是一致的，因为它们在 3D 几何体的定义和操作方式上有着共同的基本原则。在着色器（Shader）和视觉特效开发的背景下，网格提供了我们应用材质、纹理以及所有赋予屏幕上模型生命和个性的资源的基础。

在分析上述描述时，我们可以识别出两个值得密切关注的关键组成部分：顶点矩阵和材质，后者在渲染网格时至关重要。在计算机图形学中，我们必须同时考虑定义对象的数值信息——其几何形状、坐标和属性——以及允许其显示在屏幕上的视觉资源。理解数据（几何、坐标、属性）与视觉表示（材质、纹理、着色器）之间的这种二元性对于我们作为技术美术师（Technical Artists）的角色至关重要。

当我们谈论顶点数组时，我们指的是定义对象形状的点（Points）的有序列。网格不仅存储这些点；它还包括一组额外的属性，这些属性共同定义了构成模型的多边形面（三角形）。这些属性包括：

- 顶点 (Vertices)
- 法线 (Normals)
- UV 坐标 (UV Coordinates)
- 副切线 (Bitangents 或 Binormals)
- 切线 (Tangents)
- 顶点颜色 (Vertex Color)

为了理解这些属性的重要性，想象一下拿着一张纸。如果有人让你在“正面”画画，如果两面看起来完全一样，你会如何确定哪一面是正面？这就是法线发挥作用的地方——它们指示表面的朝向，帮助定义在查看对象时哪一面是可见的。在 Maya 或 Blender 等 3D 应用程序中，软件通常只渲染法线指向观察者（摄像机）的面，为了优化目的，会忽略或不渲染那些背对观察者的面。

切线和副切线也很重要，尽管它们在基础视觉效果中的作用略小于法线。继续用纸张类比，如果我们假设这张纸有四个顶点和四个法线，我们也可以定义与其关联的四个切线和四个副切线。

法线、切线和副切线共同构成了模型表面的局部坐标系（Local Coordinate System）。在应用法线贴图和高级光照效果时，这个系统是必不可少的。当我们设计、优化 and 完善我们的着色器和视觉效果时，这个基本概念将至关重要，它使我们能够理解几何体和图形资源在创建 3D 环境和角色时是如何相互作用的。

![](images/dcb61107769576fabbc2060b5f69e93bc3faeeb6938932f67192c0daca25b941.jpg)

(1.1.a 在笔记本页面上概念化网格属性)

切线通常与 UV 坐标的 U 轴对齐，而副切线则沿 V 轴定向。它们共同在每个顶点定义了一个局部参考系统，称为切线空间（Tangent Space），这对于计算高级效果（如法线贴图、模拟反射或实现其他复杂的视觉效果）至关重要。这个空间允许我们根据网格表面的关系来解释额外的纹理细节，从而让我们对最终的视觉结果有更强的控制力。

在本书的后续部分，我们将专门用一整个章节来介绍如何使用切线空间、UV 坐标和顶点颜色创建视觉效果。目前，重要的是要强调，为了让网格的属性在引擎中变得可见，网格必须连接到渲染过程以及一个或多个材质。

在 Godot 中，负责处理网格几何体并将其显示在场景中的 API 是 `RenderingServer`。如果没有这个 API，网格将仅仅作为内存中的数据资源存在，没有视觉表现，也不与摄像机或光线发生交互。它在引擎中的存在通过一个名为 `VisualInstance3D` 的节点体现出来，该节点作为操作 3D 对象的入口点。它最常用的子节点之一是 `MeshInstance3D`，它在内部管理网格及其材质之间的视觉交互。这使我们能够更直观地工作，而无需直接处理渲染过程的底层技术细节。

通过 `MeshInstance3D` 节点，我们可以直接从检查器（Inspector）中访问网格及其材质。在 Godot 中，材质（Material）是一种定义对象表面如何渲染的资源，决定了它与光线、阴影、纹理和其他视觉效果的交互。其核心是一个着色器（Shader），它是运行在 GPU 上的程序。Godot 使用 GLSL（OpenGL 着色语言）的一个简化变体来定义这些着色器，使它们更易于编辑和理解。

通过着色器，我们可以访问网格的属性。例如，预定义变量 `VERTEX` 允许我们操作顶点位置，这开启了直接从着色器修改网格的可能性。同样，诸如 `NORMAL`、`TANGENT` 和 `BITANGENT` 等变量分别提供了对法线、切线和副切线的控制。理解这些变量的工作原理需要可视化存储在顶点数据（Vertex Data）中的数值。通过这样做，我们可以更好地掌握不同属性如何相互作用以在屏幕上产生最终的视觉输出。
