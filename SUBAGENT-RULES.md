# SUBAGENT-RULES.md - 子代理派活规则

*根据任务类型自动选择合适的模型，平衡成本和质量。*

---

## 模型分级

| 级别 | 模型 | 特点 | 成本 |
|------|------|------|------|
| 🧠 **重型** | `aicodewith-claude/claude-opus-4-5-20251101` | 最聪明，复杂推理 | 💰💰💰 |
| 🎯 **中型** | `aicodewith-claude/claude-sonnet-4-5-20250929` | 平衡，日常编码 | 💰💰 |
| ⚡ **轻型** | `google-antigravity/gemini-3-flash` | 快速便宜，简单任务 | 💰 |
| 🆓 **免费** | `zhipu/glm-4.7` | 国产，够用就行 | 免费 |

---

## 任务→模型映射

### ⚡ 用轻型（Flash/GLM）
- 信息搜索、资料整理
- 简单文本处理（格式转换、翻译）
- 定时任务（早报、巡逻）
- 文件读取和总结
- 简单问答

### 🎯 用中型（Sonnet）
- 日常代码编写和调试
- 文档撰写
- 中等复杂度的分析
- API 对接和脚本编写

### 🧠 用重型（Opus）
- 复杂架构设计
- 疑难 bug 排查
- 需要深度推理的任务
- 重要决策分析
- 老板明确说"认真做"的任务

---

## 特殊规则

1. **不确定时**：默认用轻型，做不好再升级
2. **老板在线时**：可以快速问一句确认
3. **老板说"认真做/好好做"**：直接上 Opus
4. **省钱模式**：尽量用 GLM-4.7（免费）

---

## 示例

```
任务：搜索最近的 Game Jam 活动
→ 轻型（Flash）

任务：帮我写一个 bitECS 的 Movement System
→ 中型（Sonnet）

任务：分析这个游戏架构哪里有问题，给出重构方案
→ 重型（Opus）
```

---

---

## 什么时候派 Subagent？

### ✅ 派出去
- 预计耗时 > 2 分钟的任务
- 需要多次搜索 + 整理的调研任务
- 老板说"后台跑"/"不急"/"慢慢做"
- 多个独立任务可以并行时
- Cron 定时任务（早报、巡逻）

### ❌ 自己干
- 简单问答、快速搜索
- 老板在等结果、需要即时反馈
- 任务很短（< 1 分钟）

---

## 模型特性备注

### GLM-4.7 的问题
- **被动**：完成任务后不主动汇报，需要用户追问
- **原因**：模型训练风格差异，对"完成后汇报"指令不敏感
- **尝试过的方案**：config.patch 加 systemPrompt 补丁 → 不支持（schema 没有这个字段）
- **临时对策**：重要任务/需要交互的任务不用 GLM，用 Claude/Gemini

---

*这个规则可以随时调整，用着不爽就改。*
